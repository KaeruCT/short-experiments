<!DOCTYPE html>
<head>
    <style>body,html{background:#000;margin:0;padding:0;height:100%;width:100%;overflow:hidden;}
        #stage{position:absolute;top:0;bottom:0;left:0;right:0;}
    </style>
    <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
</head>
<body>
    <canvas id=stage></canvas>
    <script>
        var q = window,
            anim = q.requestAnimationFrame || q.webkitRequestAnimationFrame ||
            q.mozRequestAnimationFrame || q.oRequestAnimationFrame ||
            q.msRequestAnimationFrame || function (f) {q.setTimeout(f, 16);},
            e = document.documentElement,
            b = document.getElementsByTagName('body')[0],
            c = document.getElementById('stage'),
            ctx = c.getContext('2d'),
            map = [],
            ts = 20,
            s = 20,
            ox = 0,
            oy = 0,
            w, h, x, y, cx, cy;

            q.onresize = function () {
                w = q.innerWidth || e.clientWidth || b.clientWidth;
                h = q.innerHeight|| e.clientHeight|| b.clientHeight;
                c.width = w;
                c.height = h;
                cx = w/2 - s*ts/2;
                cy = h/2 - s*ts/2;
            }; q.onresize();

            q.onmousemove = function (e) {
                ox = 0.5 - e.clientX/w;
                oy = 0.5 - e.clientY/h;
            };

            function color(n) {
                n = n%255;
                return 'rgb('+n+','+n+','+n+')';
            }

            for (y = 0; y < s; y++) {
                map.push([]);
                for (x = 0; x < s; x++) {
                    map[y][x] = Math.floor(Math.random()*255);
                }
            }

            !function loop () {
                var size = ts,
                    oxx = ox, oyy = oy,
                    hh, xx, yy, tw, th;

                ctx.clearRect(0, 0, w, h);

                for (y = 0; y < s; y++) {
                    for (x = 0; x < s; x++) {
                        // normalize height (0 to ts*4)
                        hh =  4 * ts * (map[y][x] / 255);

                        // update 'camera' offset
                        oxx += ox;
                        oyy += oy*0.5;

                        // coords
                        xx = cx + oxx + (x*ts);
                        yy = cy + oyy + (y*ts) - hh;

                        // tile width & height
                        tw = size;
                        th = size + hh;

                        ctx.beginPath();
                        ctx.fillStyle = color(map[y][x]);
                        ctx.rect(xx, yy, tw, th);
                        ctx.fill();
                    }
                }
                anim(loop);
            }();
    </script>
</body>
</html>
